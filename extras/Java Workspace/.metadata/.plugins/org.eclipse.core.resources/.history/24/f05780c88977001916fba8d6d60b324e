/** Name: Jacob Smith
 *  Email:jsmith2021@brandeis.edu
 *  Assignment: Personal Study, provides helper methods that can  be used with Junit tests
 *  to provide additional funcitonality and information
 *  Date: May 15, 2019
 *  Sources: 
 *  Bugs:
 */
package testBackgroundCode;

import static org.junit.Assert.assertEquals;
import static org.junit.Assert.fail;

public class AssertMethods {

	/**
	 * Helper method to compare two arrays of strings for Junit testing
	 * Tested in arrEquals test unit test file
	 */
	public static boolean arrEquals(String[] given, String[] correct) {
		if (given == null | correct == null) {
			throw new IllegalArgumentException("arrays can't be null");
		}
		// check lengths because assuming parallel arrays
		if (given.length != correct.length) {
			throw new IllegalArgumentException("arrays aren't same length");
		}
		// iterate through both arrays, if any elements aren't equal return
		// false
		for (int i = 0; i < correct.length; i++) {
			if (!given[i].equals(correct[i])) {
				return false;
			}
		}
		// if all elements are equal, return true
		return true;
	}
	/**
	 *Helper method to compare two strings and assert whether they are equal
	 *but provide more helpful information than Junit assertEquals like line number and different character
	 */
	public void assertEqualsFeedback(String a, String b){
		// return different index
		int diffIndex = getDiffIndex(a, b);
		if (diffIndex == -2) {
			fail("Strigns different length");
		}else if (diffIndex == -1) {
		//the test will pass automatically, strings are equal
		}else{
			System.out.println(getErrorCompare(a,diffIndex));
			assertEquals(a,b);
		}
	}
	
	/**
	 * This isn't the same as getDiffIndex because I wanted to separate the funtionality,
	 * even though I am iterating over the string twice
	 * @param base the string to iterate over
	 * @param index the index to be examined
	 * @return a message containing the different character, index, and line number
	 */
	private String getErrorCompare(String base, int index){
		char c=' ';
		int lineNum=0;
		for(int i=0;i<=index;i++){
			c=base.charAt(i);
			if(c=='\n'){
				lineNum++;
			}
		}
		return "The Strings differed at line:"+lineNum+" character:"+c+ " index:"+index;
	}

	/**
	 * Helper method to compare two string character by character
	 * 
	 * @return the index that the strings are different, -1 if they are equal,-2
	 *         if strings are different length and the common part is equal
	 */
	private int getDiffIndex(String a, String b) {
		// check for edge cases and setup variables
		if (a == null | b == null) {
			throw new IllegalArgumentException("String can't be null");
		}
		int length = Math.min(a.length(), b.length());
		char aChar;
		char bChar;
		// go through both strings character by character
		for (int i = 0; i < length; i++) {
			aChar = a.charAt(i);
			bChar = b.charAt(i);
			if (aChar != bChar) {
				return i;
			}

		}
		// if strings are different length, return -2
		if (a.length() != b.length()) {
			return -2;
		}
		// otherwise, return -1
		return -1;

	}
	
	/**helper method to allow for testing an exception was thrown
	 * */
	public void assertExceptionArrEquals(String[] givens, String[] correct,
			boolean shouldResults) {
		// set threw based on exception
		boolean threw = false;
		try {
			AssertMethods.arrEquals(givens, correct);
		} catch (Exception e) {
			threw = true;
		}
		// assert if an exception should have been thrown
		assertEquals(threw, shouldResults);
	}
}
